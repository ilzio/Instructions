INSTALL 

	mkdir hello-next
	cd hello-next
	npm init -y
	npm install --save react react-dom next
	mkdir pages

Then open the package.json file in the hello-next directory and replace scripts with the following:

	"scripts": {
	  "dev": "next",
	  "build": "next build",
	  "start": "next start"
	}

In pages components have to be created as single files, each page will then become an endpoint ex: 

	-index.js
	-about.js
	-...

In order to enable navigation: 

	import Link from 'next/link'

	<Link href="/about">
                <a>About page</a>
            </Link>
	
*the only requirement for components placed inside <Link /> is that they should accept an
 onClick prop.

USE MOCK LAYOUT


*inside layout 


	import Header from './Header';

	const layoutStyle = {
	    margin: 20,
	    padding: 20,
	    border: '1px solid #DDD'
	};

	const Layout = props => (
	    <div style={layoutStyle}>
		<Header />
		{props.children}
	    </div>
	);

	export default Layout;

*ouside, when using it: 

	<Layout>
		<p>This is the about page</p>
	</Layout>


PASS DATA WITH QUERY STRING:

*pass data in Link href

	const PostLink = props => (
	  <li>
	    <Link href={`{post?title=${props.title}`}>
	      <a>{props.title}</a>
	    </Link>
	  </li>
	)


*retrieve with router.query.PROPNAME

	import { useRouter } from 'next/router';

	const router = useRouter();

now access data with 

	router.query.PROPNAME


CREATE DYNAMIC PAGES & CLEAN URL

	create target page with "[]" ex: [id].js

	call it as:

	    <Link href="/p/[id]" as={`/p/${props.id}`} >
	      <a>{props.id}</a>
	    </Link>

	* the href is the actual path inside pages directory  as: the path that will be rendered in the browser URL bar.


	* the page name between brackets will be the name of the query param received by the page, in this case "id"

FETCHING DATA FROM API

*getInitialProps is an async function that retrieves data before component mounting and rendering
* first load, it is executed on the server, on second load it is executed on the client. 
*example :

Index.getInitialProps = async function () {
  const res = await fetch('https://api.tvmaze.com/search/shows?q=batman');
  const data = await res.json();

  console.log(`Show data fetched. Count: ${data.length}`);
  console.log(data)
  // console.log("ciao")
  


  return {
    shows: data.map(entry => entry.show)
  };
};

getInitialProps receives a context object with the following properties:

pathname - path section of URL
query - query string section of URL parsed as an object
asPath - String of the actual path (including the query) shows in the browser
req - HTTP request object (server only)
res - HTTP response object (server only)
err - Error object if any error is encountered during the rendering


When we click on a link wrapped with the Next.js <Link> component, the page transition takes place in the browser, without making a request to the server.

If you just visit a post page directly (eg:- http://localhost:3000/p/975) you'll be able to see the message printed on the server but not in the client.


